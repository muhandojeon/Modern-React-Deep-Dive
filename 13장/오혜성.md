# μ›Ήνμ΄μ§€μ μ„±λ¥μ„ μΈ΅μ •ν•λ” λ‹¤μ–‘ν• λ°©λ²•

## μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ ν™•μΈν•κΈ°

* reportWebVitals
  + μλ°”μ¤ν¬λ¦½νΈ μμ¤€μ λΌμ΄λΈλ¬λ¦¬κ°€ λΈλΌμ°μ €μ μ›Ήνμ΄μ§€ μ„±λ¥μ„ μΈ΅μ •ν•  μ μλ” μ΄μ λ”?
    - PerformanceObserver APIλ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έ
    - π¤ https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver

* sendBeacon API

> νμ΄μ§€λ¥Ό λ– λ‚  λ• κΈ°λ΅μ„ ν•΄μ•Όν•λ” μ”κµ¬μ‚¬ν•­μ΄ μμ—λ μ μ΄ μλ”λ°μ” ..
> κ·Έλ• μ•μ•„λ΄¤λ μλ£λ“¤ κ³µμ  λ“λ¦½λ‹λ‹Ή
> https://developer.mozilla.org/ko/docs/Web/API/Navigator/sendBeacon
> https://github.com/yeonjuan/dev-blog/blob/master/Browser/send-an-http-request-on-page-exit.md

* Next.jsμ κ²½μ° `NextWebVitalsMetric`μ„ μ κ³µ
  + π¤ https://nextjs.org/learn-pages-router/seo/monitor/custom-reporting
  + Next.js νΉν™” μ§€ν‘λ„ μ κ³µν•¨
    - Next.js-hydartion: ν•μ΄λ“λ μ΄μ…ν•λ” λ° κ±Έλ¦° μ‹κ°„
    - Next.js-route-change-to-render: κ²½λ΅ λ³€κ²½ ν›„ νμ΄μ§€ λ λ”λ§μ„ μ‹μ‘ν•λ” λ° κ±Έλ¦° μ‹κ°„
    - Next.js-render: κ²½λ΅ λ³€κ²½ μ™„λ£ μ΄ν›„ νμ΄μ§€λ¥Ό λ λ”λ§ν•λ” λ° κ±Έλ¦° μ‹κ°„

## κµ¬κΈ€ λΌμ΄νΈν•μ°μ¤

* κµ¬κΈ€μ—μ„ μ κ³µν•λ” μ›Ήνμ΄μ§€ μ„±λ¥ μΈ΅μ • λ„κµ¬λ΅, μ¤ν”μ†μ¤λ΅ μ΄μλκ³  μμ

* μ‹¤ν–‰ λ°©λ²•
  + λΈλΌμ°μ € ν™•μ¥ ν”„λ΅κ·Έλ¨
  + ν¬λ΅¬ κ°λ°μ λ„κµ¬
  + CLI

### λΌμ΄νΈν•μ°μ¤ - νƒμƒ‰ λ¨λ“

* νμ΄μ§€ μ ‘μ†λ¶€ν„° λ΅λ”©μ΄ μ™„λ£λ  λ•κΉμ§€μ μ„±λ¥μ„ μΈ΅μ •ν•λ” λ¨λ“

* Total Blocking Time
  + λ©”μΈ μ¤λ λ“μ—μ„ μ‹¤ν–‰ν•λ” μ‘μ—…μ΄ 50ms μ΄μƒμ„ κΈ΄ μ‘μ—…μ΄λΌ κ°„μ£Όν•¨
  + μ΄λ° μ‘μ—…λ“¤μ„ λ¨μ•„ TBTλΌκ³  ν•¨
  + μ΄ μ°¨λ‹¨ μ‹κ°„μ€ κΈ΄ μ‘μ—…λ“¤μ„ λ¨μ•„μ„ κ°κ°μ μ‘μ—…λ“¤μ— 50msλ¥Ό λΊ€ λ‹¤μμ— λ¨λ‘ ν•©ν•΄ κ³„μ‚°ν•¨
  + π¤ https://web.dev/tbt/

* μ ‘κ·Όμ„±
  + λΉ„λ°€λ²νΈ μ…λ ¥λ€μ— λ¶™μ—¬λ„£κΈ°κ°€ κ°€λ¥ν•΄μ•Ό ν•¨
  + `<!DOCTYPE html>`μ΄ μμ–΄μ•Ό ν•¨
    - κ³Όκ±° μ›Ή ν‘μ¤€μ΄ μ •μ°©λκΈ° μ „μ—λ” λ„·μ¤μΌ€μ΄ν”„ λΈλΌμ°μ €μ™€ μΈν„°λ„· μµμ¤ν”λ΅λ¬μ© λ‘ κ°€μ§€ λ²„μ „μ΄ ν•„μ”ν–μ
    - μ΄ν›„ ν‘μ¤€μ΄ μ •ν•΄μ§€λ©΄μ„ νΌλ€μ΄ λ©μ¶”μ—κ³ , μ΄ ν‘μ¤€μ„ μ¤€μν•΄ μ›Ήνμ΄μ§€κ°€ μ‘μ„±λλ‹¤κ³  μλ―Έν•λ” κ²ƒμ΄ Doctype
    - μ„ μ–Έλμ§€ μ•μ•λ‹¤λ©΄ ν‘μ¤€μ„ μ¤€μν•μ§€ μ•μ€ κ²ƒμΌλ΅ κ°„μ£Όν•΄, νΈν™ λ¨λ“λ΅ λ λ”λ§ν•κ² λλ”λ° μ΄λ” λ¶ν•„μ”ν• μ‘μ—…

### λΌμ΄νΈν•μ°μ¤ - κΈ°κ°„ λ¨λ“

* κΈ°κ°„ λ¨λ“λ” μ‹¤μ  μ›Ήνμ΄μ§€λ¥Ό νƒμƒ‰ν•λ” λ™μ• μ§€ν‘λ¥Ό μΈ΅μ •ν•λ” κ²ƒ

### λΌμ΄νΈν•μ°μ¤ - μ¤λƒ…μƒ·

* μ¤λƒ…μƒ· λ¨λ“λ” νƒμƒ‰ λ¨λ“μ™€ μ μ‚¬ν•μ§€λ§ ν„μ¬ νμ΄μ§€ μƒνƒλ¥Ό κΈ°μ¤€μΌλ΅ λ¶„μ„ν•¨
  + ν„μ¬ μƒνƒμ—μ„ κ²€μƒ‰μ—”μ§„μ μµμ ν™”, μ ‘κ·Όμ„±, μ„±λ¥μ„ λ¶„μ„ν•  μ μμ

## WebPageTest

* https://www.webpagetest.org/

* ν•κµ­κ³Ό κ±°λ¦¬κ°€ λ¨Ό μ„λ²„λ¥Ό κΈ°μ¤€μΌλ΅ ν…μ¤νΈν•κΈ° λ•λ¬Έμ— ν¬λ΅¬ κ°λ°μ λ„κµ¬λ³΄λ‹¤ μ„±λ¥ μ§€ν‘κ°€ μ•μΆ‹μ„ κ°€λ¥μ„±μ΄ λ§¤μ° λ†’μ

### Performance Summary

* is it quick
  + TTFB, LCPλ¥Ό ν™•μΈν•¨

* is it usable
  + CLS, TTI, μ ‘κ·Όμ„± μ΄μ, ν΄λΌμ΄μ–ΈνΈ HTML λ λ”λ§ λ“±μ„ μ κ²€

* is it resilient
  + λ³΄μ• μ·¨μ•½μ„±μ„ μ κ²€

### Filmstrip

* λ¦¬μ†μ¤λ“¤ μ¤‘ μ£Όν™©μƒ‰ Xκ°€ μλ” κ²ƒμ€ λ λ”λ§μ„ λΈ”λ΅ν‚Ήν•λ” λ¦¬μ†μ¤λΌλ” λ»
  + async, defer μµμ…μ΄ μ•λ¶™μ€ scriptμΈμ§€ ν™•μΈν•μ

* svg νμΌλ“¤μ„ κ°λ³„ μ”μ²­ν•λ” κ²ƒμ€ css μ¤ν”„λΌμ΄νΈ κΈ°λ²•μ„ ν™μ©ν•΄ κ°μ„ ν•  μ μμ
  + π¤ https://github.com/twolfson/spritesmith
    - μ΄λ° λΌμ΄λΈλ¬λ¦¬κ°€ μλ„¤μ©

### Optimizations

* μµμ ν™”μ— λ€ν• μ§€ν‘λ¥Ό λ³΄μ—¬μ¤
  + Keep-Alive, Gzip, μ΄λ―Έμ§€ μ••μ¶•, CDN μ‚¬μ© μ—¬λ¶€ λ“±

### Domains

* μ–΄λ λ„λ©”μΈμ—μ„ μ–΄λ–¤ λ¦¬μ†μ¤λ¥Ό μ–Όλ§λ‚ κ°€μ Έμ¤λ”μ§€ ν™•μΈν•  μ μμ

* μ›Ήμ‚¬μ΄νΈμ μ„±κ²©μ— λ”°λΌ λ‹¤λ¥΄μ§€λ§ μ¤‘μ” λ¦¬μ†μ¤λ” μ›Ήμ‚¬μ΄νΈμ™€ κ°™μ€ κ³³μ—μ„ μ”μ²­ν•  μλ΅ λ„λ©”μΈ μ—°κ²°μ— μ†μ”λλ” λΉ„μ©μ„ μ¤„μΌ μ μμ–΄μ„ μΆ‹μ

## ν¬λ΅¬ κ°λ°μ λ„κµ¬

### μ„±λ¥ ν†µκ³„ (Performance Insights) νƒ­

* Insights
  + μ„±λ¥ μΈ΅μ • κΈ°κ°„ λ™μ• λμ—¬κ²¨λ΄μ•Ό ν•  λ‚΄μ©μ„ μ‹κ°„μ νλ¦„μ— λ”°λΌ λ³΄μ—¬μ¤
  + Long Task: λ©”μΈ μ¤λ λ“μ—μ„ μ‹¤ν–‰λλ” λ° μ¤λ μ‹κ°„μΌλ΅ λ¶„λ¥λ κΈ΄ μ‘μ—…λ“¤
    - ν•¨μλ¥Ό νΉμ •ν•μ—¬ λ¬Έμ μ μ„ μ°Ύμ„ μ μμ
  + Render blocking CSS: μ–΄λ–¤ λ¦¬μ†μ¤κ°€ λ λ”λ§μ„ λ§‰κ³  μλ”μ§€ ν™•μΈν•  μ μμ
  + Forced style recalculation: μ¤νƒ€μΌμ΄ ν•λ² κ³„μ‚°λ μ΄ν›„ μ–΄λ–¤ μ΄μ λ΅ λ‹¤μ‹ μ¤νƒ€μΌμ΄ κ³„μ‚°λμ—λ”μ§€ ν™•μΈν•  μ μμ

### μ„±λ¥ (Performance) νƒ­

* μ†μ” μ‹κ°„κ³Ό κΈ°λ³Έ
  + μ‹κ°„μ νλ¦„μ— λ”°λΌ λ©”μΈ μ¤λ λ“μ μ‘μ—…μ€ μ–΄λ–»κ² μ΄λ¤„μ΅λ”μ§€
  + μλ°”μ¤ν¬λ¦½νΈ ν™ μμ—­μ€ μ–΄λ–»κ² λ³€ν™”ν•λ”μ§€ ν™•μΈν•  μ μμ
    - κ·Έλν”„μ μ•„λλ¥Ό λ”°λΌκ°€ κ°λ°μκ°€ μ‘μ„±ν• μ½”λ“λ¥Ό ν™•μΈν•  μ μμ

## μ •λ¦¬

* μ„±λ¥μ„ κ°μ„ ν•κ³  λ³‘λ© μ§€μ μ„ μ°Ύλ” κ²ƒμ€ κ°λ° μ΄μƒμΌλ΅ μ–΄λ ¤μ΄ μΌ
  + λ°λ³µμ μΌλ΅ κΎΈμ¤€ν νƒμƒ‰ν•΄μ•Όλ§ ν•  μ μλ” μ—…λ¬΄
