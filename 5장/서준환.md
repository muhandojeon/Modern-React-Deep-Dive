# 5 리액트와 상태관리 라이브러리

상태관리는 리액트에서 가장 중요한 부분이다.

## 5.1.1 리액트 상태관리의 역사

### Flux pattern

웹앱이 복잡해지고 상태도 많아지며 **어디서 어떤 일이 일어나서** 상태가 변했는지 등을 추적하기 어려워졌다.

> Flux 패턴을 사용한 Flux라는 라이브러리가 있는줄 몰랐다,,

Flux 패턴을 통해 **어디서 어떤 일이 일어나서** 상태가 변했는지 어떻게 알 수 있을까?

이는 Flux 패턴에서 **단방향 데이터 흐름**을 따르기 때문이다.

- action: 상태에 변화가 필요할 때 발생하는 이벤트 혹은 객체
- dispatcher: action을 발생시키는 함수
- store: 애플리케이션의 상태를 저장하는 곳
- view: 사용자에게 비춰지는 화면

Flux 패턴에서는 action이 발생하면 dispatcher가 action을 받아서 store에 전달한다. 그리고 store는 action에 따라 상태를 변경하고 변경된 상태를 view에 전달한다. view는 변경된 상태를 화면에 렌더링한다.

이렇듯 데이터나 상태, 액션 등을 **단방향으로 전달**하는 방식을 사용하여 Flux 패턴은 복잡한 데이터 흐름을 단순하게 만들어준다.

### Redux

Redux는 Flux 패턴을 기반으로 만들어진 라이브러리이다.

엥? 그럼 Flux 를 사용하지 왜 Redux를 사용할까?

이는 Elm이라는 언어에서 영감을 받아 만들어졌기 때문이다.

> 그 외의 차이점이 뭐가 있나요?,, 도와주세요

#### 장점

- 상태를 더 직관적으로 관리할 수 있다.
- 복잡한 상태 관리를 쉽게 할 수 있다.

#### 단점

- Redux를 사용하면서 불편한 점이 있다면, 액션 타입, 액션 생성 함수, 리듀서를 일일이 만들어야 한다는 점이다.


### Context API

- Context API는 리액트 v16.3에 새로 도입된 기능이다.
- Context API를 사용하면 Context를 만들어서 Context 안에 Provider와 Consumer를 설정할 수 있다.

### react-query, swr

- react-query와 swr은 서버 상태를 관리하는 라이브러리이다.
  
이하 생략

### 요즘 상태관리

recoil, zustand, jotai 등 여러 라이브러리가 있다.

이는 Redux, MobX과 달리 훅을 사용해 작은 크기의 상태를 효율적으로 관리한다.

> 최애 상태관리 라이브러리는 ?

## 5.2 리액트 훅으로 시작하는 상태 관리

### 5.2.1 useState, useReducer

pass

### 5.2.2 ~ 3

전역 상태를 만들고 실제로 사용하기 위해선 전역에 데이터를 저장, **리렌더**를 해야한다.

리렌더를 하기 위해선 상태를 변경하는 함수를 호출해야한다.

인터페이스와 사용 관점에서 subscribe를 사용하고, subscribe 에 상태를 변경하는 함수를 등록한다.

### 5.2.4 Recoil, Jotai, Zustand 살펴보기

#### Recoil

이 친구는 더이상 maintain 되지 않는 것 같아요,,

코드를 많이 안 읽어서 그런지 아직 이해가 잘 안되네요,,

간단 요약

- `RecoilRoot` 를 사용해 전역 저장소를 만든다.
  - 덕분에 `State Boundary`를 구성할 수 있다.
- `atom` 을 사용해 전역 상태를 만든다.
- `useRecoilState` 를 사용해 전역 상태를 읽고 변경한다.


> 메모
>
> recoil 다시 읽기,,,

#### Jotai

recoil과 비슷한 api 형태지만 recoil의 한계를 극복하기 위해 만들어졌다.

- key를 사용하지 않는다.
- atom 그 자체로 파생값을 만들 수 있다.

### Zustand

Redux와 비슷한 api 형태를 가지고 있다.

- 중앙 집중형 저장소 활용
- 바로 custom hook 느낌으로 사용 가능
- 보일러 플레이트 코드가 Flux, Redux 보다 적다.


**정리**

단순히 전역상태 라이브러리니까 ContextAPI 사용하고 내부에서 최적화만 조금 해줬겠지? 라고 생각했는데 아니었다.

생각보다 5장에서 너무 많은 것을 배워가네요! 시야도 넓힐 수 있어서 좋았습니다. 더불어 디자인 패턴도 어느정도 배워보고 싶다는 생각이 들었어요.